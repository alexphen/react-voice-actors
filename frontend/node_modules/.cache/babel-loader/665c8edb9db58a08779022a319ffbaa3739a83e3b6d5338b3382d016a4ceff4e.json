{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aphen\\\\OneDrive\\\\Documents\\\\GitHub\\\\react-voice-actors\\\\frontend\\\\src\\\\components\\\\ShowRoleToggle.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport Show from \"../pages/Show\";\nimport { active } from \"requests\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst _ = require('lodash');\nconst CharID = 0;\nconst CharName = 1;\nconst Favorites = 2;\nconst ImageURL = 3;\n// const ActorID = 4;\nconst ShowID = 5;\nconst Title = 7;\nconst rank = 8;\nvar started;\nconst ShowRoleToggle = ({\n  actorID,\n  actorName,\n  actorImg,\n  showID,\n  flag,\n  user,\n  myList,\n  cache\n}) => {\n  _s();\n  // console.log(\"actorID received \", actorID)\n  // console.log(cache)\n\n  const [pos, setPos] = useState(0);\n  const [posDot, setPosDot] = useState(pos);\n  const [roleReturn, setRoleReturn] = useState([]);\n  const prevActor = useRef(0);\n  const prevUser = useRef(user);\n\n  // console.log(user, \"in Toggle\")\n  var filterFlag = user.length > 0;\n  // const [roles, setRoles] = useState([]);\n  var size;\n  var actors = [];\n  // var prevActor;\n\n  // const usePrevious = (value) => {\n  //     const ref = useRef()\n  //     useEffect(() => {\n  //         console.log(\"vallue\")\n  //         ref.current = value;\n  //     }, [value])\n  //     return ref.current;\n  // }\n\n  useEffect(() => {\n    // debugger\n    // console.log(cache)\n    if (!(cache && cache[actorID])) {\n      // console.log(\"roles []\")\n      getRoles(actorID);\n    }\n  }, []);\n  useEffect(() => {\n    // console.log(1, prevUser, 2, user)\n    if (!_.isEqual(prevUser.current, user)) {\n      // console.log(\"roles [user]\")\n      cache = {};\n      actors = [];\n      getRoles(actorID);\n    }\n    prevUser.current = user;\n    // if (!_.isEqual(prevUser, user)) {\n    //     console.log(\"changed\")\n    //     getRoles(actorID)\n    //     cache = {};\n    // }\n  }, [user]);\n  useEffect(() => {\n    // console.log(1, prevUser, 2, user)\n    if (!_.isEqual(prevActor.current, actorID)) {\n      // console.log(\"roles [actorID]\")\n      getRoles(actorID);\n      restart();\n    }\n    prevActor.current = actorID;\n  }, [actorID]);\n  useEffect(() => {\n    restart();\n  }, [showID]);\n\n  // useEffect(() => {\n  //     getRoles(actorID);\n  // }, []);\n\n  const getRoles = async actID => {\n    // console.log(\"ID sent to roles \", actID)\n    // console.log(1, user, 2, prevUser)\n    if (!actors.includes(actID)) {\n      if (cache && cache[actID]) {\n        handleRoles();\n        setRoleReturn(cache[actID]);\n      } else {\n        actors.push(actID);\n        const roleData = await fetch('/api/roles', {\n          method: 'POST',\n          headers: {\n            'content-type': 'application/json',\n            'Accept': 'application/json'\n          },\n          body: JSON.stringify({\n            ActorID: actID,\n            myList: myList,\n            flag: filterFlag\n          })\n        }).then(res => res.json());\n        // console.log(roleData)\n        for (let i in roleData) {\n          roleData[i] = Object.values(roleData[i]);\n        }\n        setRoleReturn(Object.values(roleData));\n        // console.log(Object.values(roleData))\n        // cache[actorID] = Object.values(roleData)\n      }\n    } else {}\n\n    // let attempt = 0; \n    // while (attempt < 20) {\n    //     try {\n    //         // console.log(roleData)\n    //         if (roleData[0].CharName) {\n    //             for (let i in roleData) {\n    //                 roleData[i] = Object.values(roleData[i])\n    //             }\n    //         }\n    //         setRoleReturn(Object.values(roleData));\n    //     }\n    //     catch (error) {\n    //         console.log(error)\n    //     }\n    //     attempt++;\n    //     sleep(5000)\n    // }\n\n    // console.log(\"rd\", Object.values(roleData))\n    // actors[actors.length] = roleData;\n  };\n\n  // useEffect(() => {\n  //     setNumRoles(countRoles(roles, roles.length));\n  //     console.log(\"numRoles\", numRoles)\n  // }, [pos, actor]);\n\n  // console.log(\"pos \", pos);\n\n  function restart() {\n    setPos(0);\n    setPosDot(0);\n  }\n  function prev() {\n    // console.log(\"buffer \", buffer, \"posDot \", posDot, \"pos \", pos, \"ext \", ext)\n\n    if (pos === 0) {\n      setPos(size - 1);\n      setPosDot(Math.min(9, size - 1));\n    } else if (pos > 7) {\n      if (posDot > 7) setPosDot(posDot - 1);\n      setPos(pos - 1);\n    } else {\n      setPos(pos - 1);\n      setPosDot(posDot - 1);\n    }\n  }\n  function next() {\n    // console.log(\"buffer \", buffer, \"posDot \", posDot, \"pos \", pos, \"ext \", ext)\n    // end of line\n    if (pos === size - 1) {\n      setPos(0);\n      setPosDot(0);\n    }\n    // pause at buffer\n    else if (posDot === 7 && size - pos > 3) {\n      setPos(pos + 1);\n    }\n    // press on\n    else {\n      setPos(pos + 1);\n      setPosDot(posDot + 1);\n      // console.log('posDot', posDot)\n      // console.log('pos', pos)\n      // console.log('size', size)\n      // console.log('rr', roleReturn)\n    }\n  }\n\n  const arr = [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"roleGallery\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"roleHeader\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        id: \"roleActor\",\n        to: `/Actor/${actorID}`,\n        children: actorName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"roleInner\",\n      children: pos < roleReturn.length ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [handleRoles(), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: roleReturn[pos][ImageURL],\n          alt: roleReturn[pos][CharName]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"imgNav\",\n          children: [size > 1 ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"roleTogglePrev\",\n            onClick: prev,\n            children: \"\\u2190\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 30\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"imgNavIndex\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selectionDots\",\n              children: arr\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"index\",\n              children: [\" \", pos + 1, \" of \", size, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 25\n          }, this), size > 1 ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"roleToggleNext\",\n            onClick: next,\n            children: \"\\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 30\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: roleReturn[String(pos)][CharName]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: `/Anime/${roleReturn[pos][ShowID][0]}/${roleReturn[pos][Title][0]}`,\n          id: \"topTitle\",\n          children: roleReturn[pos][Title][0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            \"display\": \"flex\",\n            \"flexDirection\": \"column\"\n          },\n          children: roleReturn[pos][Title].length > 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"moreTitles\",\n              children: \"\\u2022\\u2022\\u2022\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 28\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"showsList\",\n              children: roleReturn[pos][Title] ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: roleReturn[pos][Title].map((title, n) => /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/Anime/${roleReturn[pos][ShowID][n]}/${title}`,\n                  className: \"altTitles\",\n                  children: title\n                }, n, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 33\n                }, this)\n                // <div className=\"altTitles\" key={n}>\n                //     {n > 0\n                //         ?<Link to={`/Anime/${roleReturn[pos][ShowID][n]}/${title}`}>{title}</Link>\n                //         :<></>\n                //     }\n                // </div>\n                )\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 9\n  }, this);\n  function handleRoles() {\n    combineRoles();\n    bubbleSort(roleReturn, roleReturn.length);\n    findPrimary();\n    cache[actorID] = roleReturn;\n  }\n  function combineRoles() {\n    var currRoleShowIDs = [];\n    var currRoleTitles = [];\n    var currRoleRanks = [];\n    // console.log(roleReturn)\n    for (let i = 0; i < roleReturn.length; i++) {\n      // If Title is currently a String, turn it into an array\n      if (typeof roleReturn[i][Title] == 'string') {\n        currRoleShowIDs = [roleReturn[i][ShowID]];\n        currRoleTitles = [roleReturn[i][Title]];\n      } else {\n        currRoleShowIDs = roleReturn[i][ShowID];\n        currRoleTitles = roleReturn[i][Title];\n      }\n      if (typeof roleReturn[i][rank] == 'number') {\n        currRoleRanks = [roleReturn[i][rank]];\n      } else {\n        currRoleRanks = roleReturn[i][rank];\n      }\n\n      // \n      for (let p = i + 1; p < roleReturn.length; p++) {\n        if (roleReturn[i][CharID] === roleReturn[p][CharID]) {\n          // console.log(currRoleTitles, currRoleRanks)\n          currRoleShowIDs.push(roleReturn[p][ShowID]);\n          currRoleTitles.push(String(roleReturn[p][Title]));\n          currRoleRanks.push(roleReturn[p][rank]);\n          roleReturn.splice(p, 1);\n          p--;\n        } else {\n          i = p - 1;\n          break;\n        }\n      }\n      // console.log(currRoleTitles, currRoleRanks)\n\n      // sort by anime rank  ?\n      var swapped;\n      for (let k = 0; k < currRoleShowIDs.length; k++) {\n        swapped = false;\n        for (let m = 0; m < currRoleShowIDs.length; m++) {\n          if (currRoleRanks[m] > currRoleRanks[m + 1]) {\n            swap(currRoleRanks, m, m + 1);\n            swap(currRoleShowIDs, m, m + 1);\n            swap(currRoleTitles, m, m + 1);\n            swapped = true;\n          }\n        }\n        // IF no two elements were \n        // swapped by inner loop, then break\n        if (swapped === false) break;\n      }\n      roleReturn[i][ShowID] = currRoleShowIDs;\n      roleReturn[i][Title] = currRoleTitles;\n      roleReturn[i][rank] = currRoleRanks;\n    }\n    size = roleReturn.length;\n    for (let i = 0; i < Math.min(size, 10); i++) {\n      if (i === posDot) arr[i] = \"⦿\";else arr[i] = \"◦\";\n    }\n  }\n  function swap(arr, i1, i2) {\n    var temp = arr[i1];\n    arr[i1] = arr[i2];\n    arr[i2] = temp;\n  }\n  function bubbleSort(roles, n) {\n    // roleOrder = [];\n    // for (var i in roles) {\n    //     roleOrder.push(i)\n    // }\n    var i, j;\n    var swapped;\n    for (i = 0; i < n - 1; i++) {\n      swapped = false;\n      for (j = 0; j < n - i - 1; j++) {\n        if (roles[j][Favorites] < roles[j + 1][Favorites]) {\n          // Swap arr[j] and arr[j+1]\n          swap(roles, j, j + 1);\n          // temp = roles[j];\n          // roles[j] = roles[j + 1];\n          // roles[j + 1] = temp;\n          swapped = true;\n        }\n      }\n      // IF no two elements were \n      // swapped by inner loop, then break\n      if (swapped === false) break;\n    }\n  }\n  function findPrimary() {\n    // if multiple roles\n    if (roleReturn.length > 1) {\n      var num = 0;\n      // console.log(roleReturn)\n      for (var k in roleReturn) {\n        // console.log(roleReturn[k])\n        // console.log(roleReturn[k][ShowID])\n        if (roleReturn[k][ShowID].includes(parseInt(showID))) {\n          var temp = roleReturn[k];\n          roleReturn.splice(k, 1);\n          roleReturn.splice(num, 0, temp);\n          num++;\n        }\n      }\n    }\n  }\n\n  //  function countRoles(roleReturn, n) {\n  //     let res = 0;\n  //     console.log(roleReturn)\n  //     for (let i = 0; i < n; i++) {\n  //         // skip ahead on duplicates\n  //         console.log(i)\n  //         while (i < n - 1 && roleReturn[i].CharID === roleReturn[i+1].CharID) {\n  //             console.log(roleReturn[i+1])\n  //             i++;\n  //         }\n  //         res++;\n  //     }\n  //     return res;\n  //  }\n};\n_s(ShowRoleToggle, \"odC+zjlH4Kg3zY9biJxzPjcrwkM=\");\n_c = ShowRoleToggle;\nexport default ShowRoleToggle;\nvar _c;\n$RefreshReg$(_c, \"ShowRoleToggle\");","map":{"version":3,"names":["useEffect","useState","useRef","useParams","Link","Show","active","jsxDEV","_jsxDEV","Fragment","_Fragment","_","require","CharID","CharName","Favorites","ImageURL","ShowID","Title","rank","started","ShowRoleToggle","actorID","actorName","actorImg","showID","flag","user","myList","cache","_s","pos","setPos","posDot","setPosDot","roleReturn","setRoleReturn","prevActor","prevUser","filterFlag","length","size","actors","getRoles","isEqual","current","restart","actID","includes","handleRoles","push","roleData","fetch","method","headers","body","JSON","stringify","ActorID","then","res","json","i","Object","values","prev","Math","min","next","arr","className","children","id","to","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","onClick","String","style","map","title","n","combineRoles","bubbleSort","findPrimary","currRoleShowIDs","currRoleTitles","currRoleRanks","p","splice","swapped","k","m","swap","i1","i2","temp","roles","j","num","parseInt","_c","$RefreshReg$"],"sources":["C:/Users/aphen/OneDrive/Documents/GitHub/react-voice-actors/frontend/src/components/ShowRoleToggle.js"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport Show from \"../pages/Show\";\r\nimport { active } from \"requests\";\r\nconst _ = require('lodash')\r\n\r\nconst CharID    = 0;\r\nconst CharName  = 1;\r\nconst Favorites = 2;\r\nconst ImageURL  = 3;\r\n// const ActorID = 4;\r\nconst ShowID    = 5;\r\nconst Title     = 7;\r\nconst rank      = 8;\r\n\r\nvar started;\r\n\r\nconst ShowRoleToggle = ({actorID, actorName, actorImg, showID, flag, user, myList, cache}) => {\r\n\r\n    // console.log(\"actorID received \", actorID)\r\n    // console.log(cache)\r\n    \r\n    const [pos, setPos] = useState(0);\r\n    const [posDot, setPosDot] = useState(pos);\r\n    const [roleReturn, setRoleReturn] = useState([]);\r\n    const prevActor = useRef(0);\r\n    const prevUser = useRef(user);\r\n\r\n    // console.log(user, \"in Toggle\")\r\n    var filterFlag = user.length > 0;\r\n    // const [roles, setRoles] = useState([]);\r\n    var size;\r\n    var actors = [];\r\n    // var prevActor;\r\n\r\n    // const usePrevious = (value) => {\r\n    //     const ref = useRef()\r\n    //     useEffect(() => {\r\n    //         console.log(\"vallue\")\r\n    //         ref.current = value;\r\n    //     }, [value])\r\n    //     return ref.current;\r\n    // }\r\n\r\n    useEffect(() => {\r\n        // debugger\r\n        // console.log(cache)\r\n        if (!(cache && cache[actorID])) {\r\n            // console.log(\"roles []\")\r\n            getRoles(actorID);\r\n        }\r\n    }, [])\r\n    \r\n    useEffect(() => {\r\n        // console.log(1, prevUser, 2, user)\r\n        if (!_.isEqual(prevUser.current, user)) {\r\n            // console.log(\"roles [user]\")\r\n            cache = {};\r\n            actors = [];\r\n            getRoles(actorID);\r\n        }\r\n        prevUser.current = user\r\n        // if (!_.isEqual(prevUser, user)) {\r\n        //     console.log(\"changed\")\r\n        //     getRoles(actorID)\r\n        //     cache = {};\r\n        // }\r\n    }, [user])\r\n\r\n    useEffect(() => {\r\n        // console.log(1, prevUser, 2, user)\r\n        if (!_.isEqual(prevActor.current, actorID)) {\r\n            // console.log(\"roles [actorID]\")\r\n            getRoles(actorID);\r\n            restart();\r\n        }\r\n        prevActor.current = actorID;\r\n    }, [actorID]);\r\n\r\n\r\n    useEffect(() => {\r\n        restart();\r\n    }, [showID])\r\n\r\n\r\n    // useEffect(() => {\r\n    //     getRoles(actorID);\r\n    // }, []);\r\n    \r\n    const getRoles = async(actID) => {\r\n        // console.log(\"ID sent to roles \", actID)\r\n        // console.log(1, user, 2, prevUser)\r\n        if (!actors.includes(actID)) {\r\n            if (cache && cache[actID]) {\r\n                handleRoles();\r\n                setRoleReturn(cache[actID]);\r\n            }\r\n            else {\r\n                actors.push(actID)\r\n                const roleData = await fetch ('/api/roles', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'content-type': 'application/json',\r\n                        'Accept': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({\r\n                        ActorID: actID,\r\n                        myList: myList,\r\n                        flag: filterFlag\r\n                    })\r\n                }).then(res => res.json())\r\n                // console.log(roleData)\r\n                for (let i in roleData) {\r\n                    roleData[i] = Object.values(roleData[i])\r\n                }\r\n                setRoleReturn(Object.values(roleData));\r\n                // console.log(Object.values(roleData))\r\n                // cache[actorID] = Object.values(roleData)\r\n            }\r\n        }\r\n        else {\r\n        }\r\n\r\n        // let attempt = 0; \r\n        // while (attempt < 20) {\r\n        //     try {\r\n        //         // console.log(roleData)\r\n        //         if (roleData[0].CharName) {\r\n        //             for (let i in roleData) {\r\n        //                 roleData[i] = Object.values(roleData[i])\r\n        //             }\r\n        //         }\r\n        //         setRoleReturn(Object.values(roleData));\r\n        //     }\r\n        //     catch (error) {\r\n        //         console.log(error)\r\n        //     }\r\n        //     attempt++;\r\n        //     sleep(5000)\r\n        // }\r\n\r\n        // console.log(\"rd\", Object.values(roleData))\r\n        // actors[actors.length] = roleData;\r\n    }\r\n\r\n    // useEffect(() => {\r\n    //     setNumRoles(countRoles(roles, roles.length));\r\n    //     console.log(\"numRoles\", numRoles)\r\n    // }, [pos, actor]);\r\n\r\n    // console.log(\"pos \", pos);\r\n\r\n    function restart() {\r\n        setPos(0);\r\n        setPosDot(0);\r\n    }\r\n\r\n    function prev() {\r\n        // console.log(\"buffer \", buffer, \"posDot \", posDot, \"pos \", pos, \"ext \", ext)\r\n\r\n        if (pos === 0) {\r\n            setPos(size - 1);\r\n            setPosDot(Math.min(9, size - 1));\r\n            \r\n        }\r\n        else if (pos > 7) {\r\n            if (posDot > 7) \r\n            setPosDot(posDot - 1);\r\n        setPos(pos - 1);\r\n    }\r\n    else {\r\n        setPos(pos - 1);\r\n        setPosDot(posDot - 1);\r\n    }\r\n}\r\nfunction next() {\r\n    // console.log(\"buffer \", buffer, \"posDot \", posDot, \"pos \", pos, \"ext \", ext)\r\n    // end of line\r\n    if (pos === size - 1) {\r\n        setPos(0);\r\n        setPosDot(0);\r\n    }\r\n    // pause at buffer\r\n    else if (posDot === 7 && size - pos > 3 ) {\r\n        setPos(pos + 1)\r\n    }\r\n    // press on\r\n    else {\r\n        setPos(pos + 1);\r\n        setPosDot(posDot + 1);\r\n        // console.log('posDot', posDot)\r\n        // console.log('pos', pos)\r\n        // console.log('size', size)\r\n        // console.log('rr', roleReturn)\r\n    }\r\n} \r\n\r\n    const arr = [];\r\n    \r\n    return ( \r\n        \r\n        <div className=\"roleGallery\">   \r\n            <div className=\"roleHeader\">\r\n                <Link id=\"roleActor\" to={`/Actor/${actorID}`}>{actorName}</Link>\r\n            </div>       \r\n            <div id=\"roleInner\">\r\n                {pos < roleReturn.length\r\n                    ? <>{handleRoles()}\r\n                    <img src={roleReturn[pos][ImageURL]} alt={roleReturn[pos][CharName]} />\r\n                    <div className=\"imgNav\">\r\n                        {size > 1\r\n                            ?<button className=\"roleTogglePrev\" onClick={prev}>←</button>\r\n                            :<div></div>\r\n                        }\r\n                        <div className=\"imgNavIndex\">\r\n                            <div className=\"selectionDots\">\r\n                                {arr}\r\n                            </div>\r\n                            <span className=\"index\"> {pos + 1} of {size} </span>\r\n                        </div>\r\n                        {size > 1\r\n                            ?<button className=\"roleToggleNext\" onClick={next}>→</button>\r\n                            :<div></div>\r\n                        }\r\n                    </div>\r\n                    <h4>{roleReturn[String(pos)][CharName]}</h4>\r\n                    <Link to={`/Anime/${roleReturn[pos][ShowID][0]}/${roleReturn[pos][Title][0]}`} id=\"topTitle\">{roleReturn[pos][Title][0]}</Link>\r\n                    <div style={{\"display\":\"flex\", \"flexDirection\":\"column\"}}>\r\n                    {roleReturn[pos][Title].length > 1\r\n                        ?<><div id=\"moreTitles\">•••</div>\r\n                        <div className=\"showsList\">\r\n                            {roleReturn[pos][Title] ?\r\n                            <>\r\n                            {roleReturn[pos][Title].map((title, n) => \r\n                                <Link to={`/Anime/${roleReturn[pos][ShowID][n]}/${title}`} key={n} className=\"altTitles\">{title}</Link>\r\n                                // <div className=\"altTitles\" key={n}>\r\n                                //     {n > 0\r\n                                //         ?<Link to={`/Anime/${roleReturn[pos][ShowID][n]}/${title}`}>{title}</Link>\r\n                                //         :<></>\r\n                                //     }\r\n                                // </div>\r\n                            )}</>\r\n                                : <></>\r\n                            }\r\n                        </div></>\r\n                        : <></>\r\n                    }\r\n                    </div>\r\n                    </>\r\n                    : <>\r\n                        {/* <img src={actorImg} alt={actorName}></img> */}\r\n                    </>\r\n                }\r\n                \r\n            </div>\r\n\r\n        </div>\r\n     );\r\n\r\n\r\n     function handleRoles() {\r\n        combineRoles();\r\n        bubbleSort(roleReturn, roleReturn.length);\r\n        findPrimary();\r\n        cache[actorID] = roleReturn;\r\n     }\r\n\r\n     function combineRoles() {\r\n        var currRoleShowIDs = [];\r\n        var currRoleTitles = [];\r\n        var currRoleRanks = [];\r\n        // console.log(roleReturn)\r\n        for (let i = 0; i < roleReturn.length; i++) {\r\n            // If Title is currently a String, turn it into an array\r\n            if (typeof roleReturn[i][Title] == 'string') {\r\n                currRoleShowIDs = [roleReturn[i][ShowID]];\r\n                currRoleTitles  = [roleReturn[i][Title]];\r\n            }\r\n            else {\r\n                currRoleShowIDs = roleReturn[i][ShowID];\r\n                currRoleTitles  = roleReturn[i][Title];\r\n            }\r\n            if (typeof roleReturn[i][rank] == 'number') {\r\n                currRoleRanks = [roleReturn[i][rank]];\r\n            } else {\r\n                currRoleRanks = roleReturn[i][rank];                \r\n            }\r\n\r\n            // \r\n            for (let p = i + 1; p < roleReturn.length; p++) {\r\n                if(roleReturn[i][CharID] === roleReturn[p][CharID]) {\r\n                    // console.log(currRoleTitles, currRoleRanks)\r\n                    currRoleShowIDs.push(roleReturn[p][ShowID]);\r\n                    currRoleTitles.push(String(roleReturn[p][Title]));\r\n                    currRoleRanks.push(roleReturn[p][rank]);\r\n                    roleReturn.splice(p, 1);\r\n                    p--;\r\n                }\r\n                else {\r\n                    i = p - 1;\r\n                    break\r\n                }\r\n            }\r\n            // console.log(currRoleTitles, currRoleRanks)\r\n\r\n            // sort by anime rank  ?\r\n            var swapped;\r\n            for (let k = 0; k < currRoleShowIDs.length; k++) {\r\n                swapped = false\r\n                for (let m = 0; m < currRoleShowIDs.length; m++) {\r\n                    if (currRoleRanks[m] > currRoleRanks[m+1]) \r\n                    {\r\n                        swap(currRoleRanks, m, m+1)\r\n                        swap(currRoleShowIDs, m, m+1)\r\n                        swap(currRoleTitles, m, m+1)\r\n                        swapped = true;\r\n                    }\r\n                }\r\n                // IF no two elements were \r\n                // swapped by inner loop, then break\r\n                if (swapped === false)\r\n                break;\r\n            }\r\n\r\n            roleReturn[i][ShowID] = currRoleShowIDs;\r\n            roleReturn[i][Title] = currRoleTitles;\r\n            roleReturn[i][rank] = currRoleRanks;\r\n        }\r\n        size = roleReturn.length;\r\n        for (let i = 0; i < Math.min(size, 10); i++) {\r\n            if (i === posDot)\r\n                arr[i] = \"⦿\"\r\n            else\r\n                arr[i] = \"◦\";\r\n        }\r\n    }\r\n\r\n    function swap(arr, i1, i2) {\r\n        var temp = arr[i1];\r\n        arr[i1] = arr[i2];\r\n        arr[i2] = temp;\r\n    }\r\n\r\n    function bubbleSort(roles, n)\r\n    {\r\n        // roleOrder = [];\r\n        // for (var i in roles) {\r\n        //     roleOrder.push(i)\r\n        // }\r\n        var i, j;\r\n        var swapped;\r\n        for (i = 0; i < n - 1; i++) \r\n        {\r\n            swapped = false;\r\n            for (j = 0; j < n - i - 1; j++) \r\n            {\r\n                if (roles[j][Favorites] < roles[j + 1][Favorites]) \r\n                {\r\n                    // Swap arr[j] and arr[j+1]\r\n                    swap(roles, j, j+1)\r\n                    // temp = roles[j];\r\n                    // roles[j] = roles[j + 1];\r\n                    // roles[j + 1] = temp;\r\n                    swapped = true;\r\n                }\r\n            }\r\n            // IF no two elements were \r\n            // swapped by inner loop, then break\r\n            if (swapped === false)\r\n            break;\r\n        }\r\n    }\r\n\r\n    function findPrimary() {\r\n        // if multiple roles\r\n        if (roleReturn.length > 1) {\r\n            var num = 0;\r\n            // console.log(roleReturn)\r\n            for (var k in roleReturn) {\r\n                // console.log(roleReturn[k])\r\n                // console.log(roleReturn[k][ShowID])\r\n                if (roleReturn[k][ShowID].includes(parseInt(showID))) {\r\n                    \r\n                    var temp = roleReturn[k];\r\n                    roleReturn.splice(k, 1);\r\n                    roleReturn.splice(num, 0, temp);\r\n                    num++;\r\n                }\r\n            }\r\n        }\r\n    }   \r\n\r\n    //  function countRoles(roleReturn, n) {\r\n    //     let res = 0;\r\n    //     console.log(roleReturn)\r\n    //     for (let i = 0; i < n; i++) {\r\n    //         // skip ahead on duplicates\r\n    //         console.log(i)\r\n    //         while (i < n - 1 && roleReturn[i].CharID === roleReturn[i+1].CharID) {\r\n    //             console.log(roleReturn[i+1])\r\n    //             i++;\r\n    //         }\r\n    //         res++;\r\n    //     }\r\n    //     return res;\r\n    //  }\r\n}\r\n \r\nexport default ShowRoleToggle;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}