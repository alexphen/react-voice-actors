{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aphen/OneDrive/Documents/GitHub/react-voice-actors/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/aphen/OneDrive/Documents/GitHub/react-voice-actors/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/aphen/OneDrive/Documents/GitHub/react-voice-actors/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import ShowInfo from\"../components/ShowInfo\";// import {myList} from './Home'\n// import SearchBar from \"../components/SearchBar\"\nimport{useState,useEffect}from\"react\";import{useParams,Link}from\"react-router-dom\";// import { unmountComponentAtNode } from \"react-dom\";\nimport{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var ShowID=0,Title=1,ImageURL=2;export default function Show(_ref){var user=_ref.user,myList=_ref.myList;var _useParams=useParams(),id=_useParams.id,title=_useParams.title;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),keyword=_useState2[0],setKeyword=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),shows=_useState4[0],setShows=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),titles=_useState6[0],setTitles=_useState6[1];var _useState7=useState([id||0,title||'']),_useState8=_slicedToArray(_useState7,2),showSelected=_useState8[0],setShowSelected=_useState8[1];var filterFlag=user.length>0;// const [showActors, setShowActors] = useState([]);\n// useEffect(() => {\n// }, [showSelected])\nuseEffect(function(){setShowSelected([id,title]);setKeyword(\"\");getSearchData(\"\");window.scroll({top:0,left:0,behavior:\"smooth\"});},[id,title]);var getSearchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(keyword){var idRes,tRes,searchData,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setKeyword(keyword);setTitles([]);// if(keyword === \"\") {\n//     setTitles([])\n// }\n// else {\nidRes=[];tRes=[];_context.next=6;return fetch('/api/search',{method:'POST',headers:{'content-type':'application/json','Accept':'application/json'},body:JSON.stringify({Title:keyword,myList:myList,flag:filterFlag})}).then(function(res){return res.json();});case 6:searchData=_context.sent;console.log(\"SD\",searchData);// console.log(\"RD\", returnedData)\nfor(i in searchData){searchData[i]=Object.values(searchData[i]);tRes.push(searchData[i][Title]);idRes.push(searchData[i][ShowID]);}setTitles(tRes);setShows(idRes);// }\ncase 11:case\"end\":return _context.stop();}},_callee);}));return function getSearchData(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"show\",children:showSelected[0]!==0&&showSelected[0]!=null//!= 0//.length > 1 //\n?/*#__PURE__*/_jsxs(_Fragment,{children:[showSelected[0]!==0?/*#__PURE__*/_jsxs(\"h1\",{id:\"animeTitle\",children:[\" \",showSelected[Title],\" \"]}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"animeSearchSide\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"animeSearch\",className:\"search\",type:\"search\",placeholder:\"Search Anime\",autoComplete:\"off\",onChange:function onChange(e){return getSearchData(e.target.value);},value:keyword}),/*#__PURE__*/_jsx(\"div\",{className:\"results\",children:titles.slice(0,10).map(function(title,index){return/*#__PURE__*/_jsx(Link,{to:\"/Anime/\".concat(shows[index],\"/\").concat(title),className:\"resBox\",children:title});})})]}),/*#__PURE__*/_jsx(ShowInfo,{Show:showSelected,user:user,myList:myList,flag:filterFlag})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{id:\"begin\",children:\"Search for an Anime to Begin!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"animeSearchSide\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"animeSearch\",className:\"search\",type:\"search\",placeholder:\"Search Anime\",autoComplete:\"off\",onChange:function onChange(e){return getSearchData(e.target.value);},value:keyword}),/*#__PURE__*/_jsx(\"div\",{className:\"results\",children:titles.slice(0,10).map(function(title,index){return/*#__PURE__*/_jsx(Link,{to:\"/Anime/\".concat(shows[index],\"/\").concat(title),className:\"resBox\",children:title});})})]})]})})});}","map":{"version":3,"names":["ShowInfo","useState","useEffect","useParams","Link","jsxs","_jsxs","Fragment","_Fragment","jsx","_jsx","ShowID","Title","ImageURL","Show","_ref","user","myList","_useParams","id","title","_useState","_useState2","_slicedToArray","keyword","setKeyword","_useState3","_useState4","shows","setShows","_useState5","_useState6","titles","setTitles","_useState7","_useState8","showSelected","setShowSelected","filterFlag","length","getSearchData","window","scroll","top","left","behavior","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","idRes","tRes","searchData","i","wrap","_callee$","_context","prev","next","fetch","method","headers","body","JSON","stringify","flag","then","res","json","sent","console","log","Object","values","push","stop","_x","apply","arguments","children","className","type","placeholder","autoComplete","onChange","e","target","value","slice","map","index","to","concat"],"sources":["C:/Users/aphen/OneDrive/Documents/GitHub/react-voice-actors/frontend/src/pages/Show.js"],"sourcesContent":["import ShowInfo from \"../components/ShowInfo\"\r\n// import {myList} from './Home'\r\n// import SearchBar from \"../components/SearchBar\"\r\nimport { useState, useEffect } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\n// import { unmountComponentAtNode } from \"react-dom\";\r\nconst   ShowID      = 0,\r\n        Title       = 1,\r\n        ImageURL    = 2;\r\n\r\n\r\nexport default function Show({user, myList}) {\r\n    \r\n    const { id, title } = useParams();\r\n    const [keyword, setKeyword] = useState('');\r\n    const [shows, setShows] = useState([]);\r\n    const [titles, setTitles] = useState([]);\r\n    const [showSelected, setShowSelected] = useState([id || 0, title || '']);\r\n    var filterFlag = user.length > 0;\r\n    // const [showActors, setShowActors] = useState([]);\r\n    \r\n    // useEffect(() => {\r\n    // }, [showSelected])\r\n\r\n    useEffect(() => {\r\n        setShowSelected([id, title]);\r\n        setKeyword(\"\");\r\n        getSearchData(\"\");\r\n        window.scroll({top: 0, left: 0, behavior: \"smooth\"})\r\n    }, [id, title])\r\n    \r\n    const getSearchData = async(keyword) => {\r\n        setKeyword(keyword);\r\n        setTitles([])\r\n        // if(keyword === \"\") {\r\n        //     setTitles([])\r\n        // }\r\n        // else {\r\n            var idRes = [];\r\n            var tRes = [];\r\n\r\n            const searchData = await fetch ('/api/search', {\r\n                method: 'POST',\r\n                headers: {\r\n                  'content-type': 'application/json',\r\n                  'Accept': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                  Title: keyword,\r\n                  myList: myList,\r\n                  flag: filterFlag\r\n                })\r\n            })\r\n            .then(res => res.json());\r\n            console.log(\"SD\", searchData)\r\n\r\n            // console.log(\"RD\", returnedData)\r\n            for (let i in searchData) {\r\n                searchData[i] = Object.values(searchData[i]);\r\n                tRes.push(searchData[i][Title]);\r\n                idRes.push(searchData[i][ShowID]);\r\n            }\r\n            setTitles(tRes);\r\n            setShows(idRes);\r\n        // }\r\n    }\r\n\r\n    return (   \r\n        <>\r\n        <div className=\"show\">\r\n            {/* {console.log(\"showSelected\", showSelected)} */}\r\n            {showSelected[0] !== 0 && showSelected[0] != null //!= 0//.length > 1 //\r\n                ? <>\r\n                    {showSelected[0] !== 0\r\n                        ? <h1 id=\"animeTitle\"> {showSelected[Title]} </h1>\r\n                        : <></>\r\n                    }\r\n                    <div className=\"animeSearchSide\">\r\n                        <input\r\n                            id=\"animeSearch\"\r\n                            className=\"search\"\r\n                            type=\"search\"\r\n                            placeholder=\"Search Anime\"\r\n                            autoComplete=\"off\"\r\n                            onChange={(e) => getSearchData(e.target.value)}\r\n                            value={keyword} />\r\n                        <div className=\"results\">\r\n                            {/* Display 10 filtered results. Change Show on click */}\r\n                            {titles.slice(0,10).map((title, index) => (\r\n                                <Link to={`/Anime/${shows[index]}/${title}`} className=\"resBox\">{title}</Link>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                    <ShowInfo Show={showSelected} user={user} myList={myList} flag={filterFlag}/>\r\n                </>\r\n                : <><h2 id=\"begin\">Search for an Anime to Begin!</h2>\r\n                <div className=\"animeSearchSide\">\r\n                        <input\r\n                            id=\"animeSearch\"\r\n                            className=\"search\"\r\n                            type=\"search\"\r\n                            placeholder=\"Search Anime\"\r\n                            autoComplete=\"off\"\r\n                            onChange={(e) => getSearchData(e.target.value)}\r\n                            value={keyword} />\r\n                        <div className=\"results\">\r\n                            {/* Display 10 filtered results. Change Show on click */}\r\n                            {titles.slice(0,10).map((title, index) => (\r\n                                <Link to={`/Anime/${shows[index]}/${title}`} className=\"resBox\">{title}</Link>\r\n                            ))}\r\n                        </div>\r\n                    </div></>\r\n            }\r\n            \r\n            {/* <ShowInfo list={myList} show={myList.shows[51535]} /> */}\r\n        </div> \r\n        </>    \r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}