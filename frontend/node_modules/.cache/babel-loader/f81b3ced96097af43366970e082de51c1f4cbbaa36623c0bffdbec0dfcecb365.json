{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aphen/OneDrive/Documents/GitHub/react-voice-actors/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/aphen/OneDrive/Documents/GitHub/react-voice-actors/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/aphen/OneDrive/Documents/GitHub/react-voice-actors/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useParams,Link}from\"react-router-dom\";import Show from\"../pages/Show\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CharID=0;var CharName=1;var Favorites=2;var ImageURL=3;// const ActorID = 4;\nvar ShowID=5;var Title=7;var rank=8;var ShowRoleToggle=function ShowRoleToggle(_ref){var actorID=_ref.actorID,actorName=_ref.actorName,showID=_ref.showID,flag=_ref.flag,user=_ref.user,myList=_ref.myList;// console.log(\"actorID received \", actorID)\nvar _useState=useState(0),_useState2=_slicedToArray(_useState,2),pos=_useState2[0],setPos=_useState2[1];var _useState3=useState(pos),_useState4=_slicedToArray(_useState3,2),posDot=_useState4[0],setPosDot=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),roleReturn=_useState6[0],setRoleReturn=_useState6[1];// console.log(user, \"in Toggle\")\nvar filterFlag=user.length>0;// const [roles, setRoles] = useState([]);\nvar size;var ext;var prev;// \nuseEffect(function(){// console.log(actorID)\nif(prev!=actorID){prev=actorID;// console.log(\"getting roles\", actorID)\ngetRoles(actorID);restart();}},[actorID]);useEffect(function(){if(myList.length>0){sleep(5000);console.log(myList);getRoles(actorID);}},[myList]);useEffect(function(){restart();},[showID]);// useEffect(() => {\n//     getRoles(actorID);\n// }, []);\nvar getRoles=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(actID){var roleData,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/roles',{method:'POST',headers:{'content-type':'application/json','Accept':'application/json'},body:JSON.stringify({ActorID:actID,flag:filterFlag})}).then(function(res){return res.json();});case 2:roleData=_context.sent;// console.log(roleData)\nif(roleData[0].CharName){for(i in roleData){roleData[i]=Object.values(roleData[i]);}}setRoleReturn(Object.values(roleData));console.log(\"rd\",Object.values(roleData));// actors[actors.length] = roleData;\ncase 6:case\"end\":return _context.stop();}},_callee);}));return function getRoles(_x){return _ref2.apply(this,arguments);};}();// useEffect(() => {\n//     setNumRoles(countRoles(roles, roles.length));\n//     console.log(\"numRoles\", numRoles)\n// }, [pos, actor]);\n// console.log(\"pos \", pos);\nfunction restart(){setPos(0);setPosDot(0);}function prev(){// console.log(\"buffer \", buffer, \"posDot \", posDot, \"pos \", pos, \"ext \", ext)\nif(pos===0){setPos(size-1);setPosDot(Math.min(9,size-1));}else if(pos>7){if(posDot>7)setPosDot(posDot-1);setPos(pos-1);}else{setPos(pos-1);setPosDot(posDot-1);}}function next(){// console.log(\"buffer \", buffer, \"posDot \", posDot, \"pos \", pos, \"ext \", ext)\n// end of line\nif(pos===size-1){setPos(0);setPosDot(0);}// pause at buffer\nelse if(posDot===7&&size-pos>3){setPos(pos+1);}// press on\nelse{setPos(pos+1);setPosDot(posDot+1);// console.log('posDot', posDot)\n// console.log('pos', pos)\n// console.log('size', size)\n// console.log('rr', roleReturn)\n}}var arr=[];return/*#__PURE__*/_jsxs(\"div\",{className:\"roleGallery\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"roleActor\",children:/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/Actor/\".concat(actorID),children:actorName})})}),/*#__PURE__*/_jsx(\"div\",{children:pos<roleReturn.length?/*#__PURE__*/_jsxs(_Fragment,{children:[handleRoles(),/*#__PURE__*/_jsx(\"img\",{src:roleReturn[pos][ImageURL],alt:roleReturn[pos][CharName]}),/*#__PURE__*/_jsxs(\"div\",{className:\"imgNav\",children:[size>1?/*#__PURE__*/_jsx(\"button\",{className:\"roleTogglePrev\",onClick:prev,children:\"\\u2190\"}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"selectionDots\",children:[arr,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"index\",children:[\" \",pos+1,\" of \",size,\" \"]})]}),size>1?/*#__PURE__*/_jsx(\"button\",{className:\"roleToggleNext\",onClick:next,children:\"\\u2192\"}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsx(\"h4\",{children:roleReturn[String(pos)][CharName]}),/*#__PURE__*/_jsx(\"div\",{id:\"topTitle\",children:/*#__PURE__*/_jsx(Link,{to:\"/Show/\".concat(roleReturn[pos][ShowID][0],\"/\").concat(roleReturn[pos][Title][0]),children:roleReturn[pos][Title][0]})}),roleReturn[pos][Title].length>1?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"moreTitles\",children:\"\\u2022\\u2022\\u2022\"}),/*#__PURE__*/_jsx(\"div\",{className:\"showsList\",children:roleReturn[pos][Title]?/*#__PURE__*/_jsx(_Fragment,{children:roleReturn[pos][Title].map(function(title,n){return/*#__PURE__*/_jsx(\"div\",{children:n>0?/*#__PURE__*/_jsx(Link,{to:\"/Show/\".concat(roleReturn[pos][ShowID][n],\"/\").concat(title),children:title}):/*#__PURE__*/_jsx(_Fragment,{})},n);})}):/*#__PURE__*/_jsx(_Fragment,{})})]}):/*#__PURE__*/_jsx(_Fragment,{})]}):/*#__PURE__*/_jsx(_Fragment,{})})]});function sleep(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}function handleRoles(){combineRoles();bubbleSort(roleReturn,roleReturn.length);findPrimary();}function combineRoles(){var currRoleShowIDs=[];var currRoleTitles=[];var currRoleRanks=[];// console.log(roleReturn)\nfor(var i=0;i<roleReturn.length;i++){// If Title is currently a String, turn it into an array\nif(typeof roleReturn[i][Title]=='string'){currRoleShowIDs=[roleReturn[i][ShowID]];currRoleTitles=[roleReturn[i][Title]];}else{currRoleShowIDs=roleReturn[i][ShowID];currRoleTitles=roleReturn[i][Title];}if(typeof roleReturn[i][rank]=='number'){currRoleRanks=[roleReturn[i][rank]];}else{currRoleRanks=roleReturn[i][rank];}// \nfor(var p=i+1;p<roleReturn.length;p++){if(roleReturn[i][CharID]===roleReturn[p][CharID]){// console.log(currRoleTitles, currRoleRanks)\ncurrRoleShowIDs.push(roleReturn[p][ShowID]);currRoleTitles.push(String(roleReturn[p][Title]));currRoleRanks.push(roleReturn[p][rank]);roleReturn.splice(p,1);p--;}else{i=p-1;break;}}console.log(currRoleTitles,currRoleRanks);var swapped,temp;for(var k=0;k<currRoleShowIDs.length;k++){swapped=false;for(var m=0;m<currRoleShowIDs.length;m++){if(currRoleRanks[m]>currRoleRanks[m+1]){swap(currRoleRanks,m,m+1);swap(currRoleShowIDs,m,m+1);swap(currRoleTitles,m,m+1);swapped=true;}}// IF no two elements were \n// swapped by inner loop, then break\nif(swapped===false)break;}roleReturn[i][ShowID]=currRoleShowIDs;roleReturn[i][Title]=currRoleTitles;roleReturn[i][rank]=currRoleRanks;}size=roleReturn.length;ext=size-10;for(var _i=0;_i<Math.min(size,10);_i++){if(_i===posDot)arr[_i]=\"⦿\";else arr[_i]=\"◦\";}}function swap(arr,i1,i2){var temp=arr[i1];arr[i1]=arr[i2];arr[i2]=temp;}function bubbleSort(roles,n){// roleOrder = [];\n// for (var i in roles) {\n//     roleOrder.push(i)\n// }\nvar i,j,temp;var swapped;for(i=0;i<n-1;i++){swapped=false;for(j=0;j<n-i-1;j++){if(roles[j][Favorites]<roles[j+1][Favorites]){// Swap arr[j] and arr[j+1]\nswap(roles,j,j+1);// temp = roles[j];\n// roles[j] = roles[j + 1];\n// roles[j + 1] = temp;\nswapped=true;}}// IF no two elements were \n// swapped by inner loop, then break\nif(swapped===false)break;}}function findPrimary(){// if multiple roles\nif(roleReturn.length>1){var num=0;// console.log(roleReturn)\nfor(var k in roleReturn){// console.log(roleReturn[k])\n// console.log(roleReturn[k][ShowID])\nif(roleReturn[k][ShowID].includes(parseInt(showID))){var temp=roleReturn[k];roleReturn.splice(k,1);roleReturn.splice(num,0,temp);num++;}}}}//  function countRoles(roleReturn, n) {\n//     let res = 0;\n//     console.log(roleReturn)\n//     for (let i = 0; i < n; i++) {\n//         // skip ahead on duplicates\n//         console.log(i)\n//         while (i < n - 1 && roleReturn[i].CharID === roleReturn[i+1].CharID) {\n//             console.log(roleReturn[i+1])\n//             i++;\n//         }\n//         res++;\n//     }\n//     return res;\n//  }\n};export default ShowRoleToggle;","map":{"version":3,"names":["useEffect","useState","useParams","Link","Show","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CharID","CharName","Favorites","ImageURL","ShowID","Title","rank","ShowRoleToggle","_ref","actorID","actorName","showID","flag","user","myList","_useState","_useState2","_slicedToArray","pos","setPos","_useState3","_useState4","posDot","setPosDot","_useState5","_useState6","roleReturn","setRoleReturn","filterFlag","length","size","ext","prev","getRoles","restart","sleep","console","log","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","actID","roleData","i","wrap","_callee$","_context","next","fetch","method","headers","body","JSON","stringify","ActorID","then","res","json","sent","Object","values","stop","_x","apply","arguments","Math","min","arr","className","children","to","concat","handleRoles","src","alt","onClick","String","id","map","title","n","ms","Promise","resolve","setTimeout","combineRoles","bubbleSort","findPrimary","currRoleShowIDs","currRoleTitles","currRoleRanks","p","push","splice","swapped","temp","k","m","swap","i1","i2","roles","j","num","includes","parseInt"],"sources":["C:/Users/aphen/OneDrive/Documents/GitHub/react-voice-actors/frontend/src/components/ShowRoleToggle.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport Show from \"../pages/Show\";\r\n\r\nconst CharID    = 0;\r\nconst CharName  = 1;\r\nconst Favorites = 2;\r\nconst ImageURL  = 3;\r\n// const ActorID = 4;\r\nconst ShowID    = 5;\r\nconst Title     = 7;\r\nconst rank      = 8;\r\n\r\nconst ShowRoleToggle = ({actorID, actorName, showID, flag, user, myList}) => {\r\n\r\n    // console.log(\"actorID received \", actorID)\r\n    \r\n    const [pos, setPos] = useState(0);\r\n    const [posDot, setPosDot] = useState(pos);\r\n    const [roleReturn, setRoleReturn] = useState([]);\r\n    // console.log(user, \"in Toggle\")\r\n    var filterFlag = user.length > 0;\r\n    // const [roles, setRoles] = useState([]);\r\n    var size;\r\n    var ext;\r\n    var prev;\r\n\r\n    // \r\n    useEffect(() => {\r\n        // console.log(actorID)\r\n        if (prev != actorID) {\r\n            prev = actorID;\r\n            // console.log(\"getting roles\", actorID)\r\n            getRoles(actorID);\r\n            restart();\r\n        }\r\n    }, [actorID]);\r\n\r\n\r\n    useEffect(() => {\r\n        if (myList.length > 0) {\r\n            sleep(5000)\r\n            console.log(myList)\r\n            getRoles(actorID);\r\n        }\r\n    }, [myList])\r\n\r\n    useEffect(() => {\r\n        restart();\r\n    }, [showID])\r\n\r\n    // useEffect(() => {\r\n    //     getRoles(actorID);\r\n    // }, []);\r\n    \r\n    const getRoles = async(actID) => {\r\n        // console.log(\"ID sent to roles \", actID)\r\n        const roleData = await fetch ('/roles', {\r\n            method: 'POST',\r\n            headers: {\r\n                'content-type': 'application/json',\r\n                'Accept': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                ActorID: actID,\r\n                flag: filterFlag\r\n            })\r\n        }).then(res => res.json())\r\n        // console.log(roleData)\r\n        if (roleData[0].CharName) {\r\n            for (let i in roleData) {\r\n                roleData[i] = Object.values(roleData[i])\r\n            }\r\n        }\r\n        setRoleReturn(Object.values(roleData));\r\n        console.log(\"rd\", Object.values(roleData))\r\n        // actors[actors.length] = roleData;\r\n    }\r\n\r\n    // useEffect(() => {\r\n    //     setNumRoles(countRoles(roles, roles.length));\r\n    //     console.log(\"numRoles\", numRoles)\r\n    // }, [pos, actor]);\r\n\r\n    // console.log(\"pos \", pos);\r\n\r\n    function restart() {\r\n        setPos(0);\r\n        setPosDot(0);\r\n    }\r\n\r\n    function prev() {\r\n        // console.log(\"buffer \", buffer, \"posDot \", posDot, \"pos \", pos, \"ext \", ext)\r\n\r\n        if (pos === 0) {\r\n            setPos(size - 1);\r\n            setPosDot(Math.min(9, size - 1));\r\n            \r\n        }\r\n        else if (pos > 7) {\r\n            if (posDot > 7) \r\n            setPosDot(posDot - 1);\r\n        setPos(pos - 1);\r\n    }\r\n    else {\r\n        setPos(pos - 1);\r\n        setPosDot(posDot - 1);\r\n    }\r\n}\r\nfunction next() {\r\n    // console.log(\"buffer \", buffer, \"posDot \", posDot, \"pos \", pos, \"ext \", ext)\r\n    // end of line\r\n    if (pos === size - 1) {\r\n        setPos(0);\r\n        setPosDot(0);\r\n    }\r\n    // pause at buffer\r\n    else if (posDot === 7 && size - pos > 3 ) {\r\n        setPos(pos + 1)\r\n    }\r\n    // press on\r\n    else {\r\n        setPos(pos + 1);\r\n        setPosDot(posDot + 1);\r\n        // console.log('posDot', posDot)\r\n        // console.log('pos', pos)\r\n        // console.log('size', size)\r\n        // console.log('rr', roleReturn)\r\n    }\r\n} \r\n\r\n    const arr = [];\r\n    \r\n    return ( \r\n        \r\n        <div className=\"roleGallery\">\r\n            <div className=\"roleActor\">\r\n                <h3>\r\n                    <Link to={`/Actor/${actorID}`}>{actorName}</Link>\r\n                </h3>\r\n            </div>\r\n            <div>\r\n                {pos < roleReturn.length\r\n                    ? <>{handleRoles()}\r\n                    <img src={roleReturn[pos][ImageURL]} alt={roleReturn[pos][CharName]} />\r\n                    <div className=\"imgNav\">\r\n                        {size > 1\r\n                            ?<button className=\"roleTogglePrev\" onClick={prev}>←</button>\r\n                            :<></>\r\n                        }\r\n                        <div className=\"selectionDots\">\r\n                            {arr}\r\n                            <br></br>\r\n                            <span className=\"index\"> {pos + 1} of {size} </span>  \r\n                        </div>\r\n                        {size > 1\r\n                            ?<button className=\"roleToggleNext\" onClick={next}>→</button>\r\n                            :<></>\r\n                        }\r\n                    </div>\r\n                    <h4>{roleReturn[String(pos)][CharName]}</h4>\r\n                    <div id=\"topTitle\">\r\n                        <Link to={`/Show/${roleReturn[pos][ShowID][0]}/${roleReturn[pos][Title][0]}`}>{roleReturn[pos][Title][0]}</Link>\r\n                    </div>\r\n                    {roleReturn[pos][Title].length > 1\r\n                        ?<><div id=\"moreTitles\">•••</div>\r\n                        <div className=\"showsList\">\r\n                            {roleReturn[pos][Title] ?\r\n                            <>\r\n                            {roleReturn[pos][Title].map((title, n) => \r\n                                <div key={n}>\r\n                                    {n > 0\r\n                                        ?<Link to={`/Show/${roleReturn[pos][ShowID][n]}/${title}`}>{title}</Link>\r\n                                        :<></>\r\n                                    }\r\n                                </div>\r\n                            )}</>\r\n                                : <></>\r\n                            }\r\n                        </div></>\r\n                        : <></>\r\n                    }\r\n                    </>\r\n                    : <></>\r\n                }\r\n                \r\n            </div>\r\n\r\n        </div>\r\n     );\r\n\r\n     function sleep(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n     function handleRoles() {\r\n        combineRoles();\r\n        bubbleSort(roleReturn, roleReturn.length);\r\n        findPrimary();\r\n     }\r\n\r\n     function combineRoles() {\r\n        var currRoleShowIDs = [];\r\n        var currRoleTitles = [];\r\n        var currRoleRanks = [];\r\n        // console.log(roleReturn)\r\n        for (let i = 0; i < roleReturn.length; i++) {\r\n            // If Title is currently a String, turn it into an array\r\n            if (typeof roleReturn[i][Title] == 'string') {\r\n                currRoleShowIDs = [roleReturn[i][ShowID]];\r\n                currRoleTitles  = [roleReturn[i][Title]];\r\n            }\r\n            else {\r\n                currRoleShowIDs = roleReturn[i][ShowID];\r\n                currRoleTitles  = roleReturn[i][Title];\r\n            }\r\n            if (typeof roleReturn[i][rank] == 'number') {\r\n                currRoleRanks = [roleReturn[i][rank]];\r\n            } else {\r\n                currRoleRanks = roleReturn[i][rank];                \r\n            }\r\n\r\n            // \r\n            for (let p = i + 1; p < roleReturn.length; p++) {\r\n                if(roleReturn[i][CharID] === roleReturn[p][CharID]) {\r\n                    // console.log(currRoleTitles, currRoleRanks)\r\n                    currRoleShowIDs.push(roleReturn[p][ShowID]);\r\n                    currRoleTitles.push(String(roleReturn[p][Title]));\r\n                    currRoleRanks.push(roleReturn[p][rank]);\r\n                    roleReturn.splice(p, 1);\r\n                    p--;\r\n                }\r\n                else {\r\n                    i = p - 1;\r\n                    break\r\n                }\r\n            }\r\n            console.log(currRoleTitles, currRoleRanks)\r\n\r\n            var swapped, temp;\r\n            for (let k = 0; k < currRoleShowIDs.length; k++) {\r\n                swapped = false\r\n                for (let m = 0; m < currRoleShowIDs.length; m++) {\r\n                    if (currRoleRanks[m] > currRoleRanks[m+1]) \r\n                    {\r\n                        swap(currRoleRanks, m, m+1)\r\n                        swap(currRoleShowIDs, m, m+1)\r\n                        swap(currRoleTitles, m, m+1)\r\n                        swapped = true;\r\n                    }\r\n                }\r\n                // IF no two elements were \r\n                // swapped by inner loop, then break\r\n                if (swapped === false)\r\n                break;\r\n            }\r\n\r\n            roleReturn[i][ShowID] = currRoleShowIDs;\r\n            roleReturn[i][Title] = currRoleTitles;\r\n            roleReturn[i][rank] = currRoleRanks;\r\n        }\r\n        size = roleReturn.length;\r\n        ext = size - 10;\r\n        for (let i = 0; i < Math.min(size, 10); i++) {\r\n            if (i === posDot)\r\n                arr[i] = \"⦿\"\r\n            else\r\n                arr[i] = \"◦\";\r\n        }\r\n    }\r\n\r\n    function swap(arr, i1, i2) {\r\n        var temp = arr[i1];\r\n        arr[i1] = arr[i2];\r\n        arr[i2] = temp;\r\n    }\r\n\r\n    function bubbleSort(roles, n)\r\n    {\r\n        // roleOrder = [];\r\n        // for (var i in roles) {\r\n        //     roleOrder.push(i)\r\n        // }\r\n        var i, j, temp;\r\n        var swapped;\r\n        for (i = 0; i < n - 1; i++) \r\n        {\r\n            swapped = false;\r\n            for (j = 0; j < n - i - 1; j++) \r\n            {\r\n                if (roles[j][Favorites] < roles[j + 1][Favorites]) \r\n                {\r\n                    // Swap arr[j] and arr[j+1]\r\n                    swap(roles, j, j+1)\r\n                    // temp = roles[j];\r\n                    // roles[j] = roles[j + 1];\r\n                    // roles[j + 1] = temp;\r\n                    swapped = true;\r\n                }\r\n            }\r\n            // IF no two elements were \r\n            // swapped by inner loop, then break\r\n            if (swapped === false)\r\n            break;\r\n        }\r\n    }\r\n\r\n    function findPrimary() {\r\n        // if multiple roles\r\n        if (roleReturn.length > 1) {\r\n            var num = 0;\r\n            // console.log(roleReturn)\r\n            for (var k in roleReturn) {\r\n                // console.log(roleReturn[k])\r\n                // console.log(roleReturn[k][ShowID])\r\n                if (roleReturn[k][ShowID].includes(parseInt(showID))) {\r\n                    \r\n                    var temp = roleReturn[k];\r\n                    roleReturn.splice(k, 1);\r\n                    roleReturn.splice(num, 0, temp);\r\n                    num++;\r\n                }\r\n            }\r\n        }\r\n    }   \r\n\r\n    //  function countRoles(roleReturn, n) {\r\n    //     let res = 0;\r\n    //     console.log(roleReturn)\r\n    //     for (let i = 0; i < n; i++) {\r\n    //         // skip ahead on duplicates\r\n    //         console.log(i)\r\n    //         while (i < n - 1 && roleReturn[i].CharID === roleReturn[i+1].CharID) {\r\n    //             console.log(roleReturn[i+1])\r\n    //             i++;\r\n    //         }\r\n    //         res++;\r\n    //     }\r\n    //     return res;\r\n    //  }\r\n}\r\n \r\nexport default ShowRoleToggle;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}